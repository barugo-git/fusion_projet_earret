{% extends 'base.html.twig' %}
{# {% block stylesheets %} #}


{#     <link rel="stylesheet" href="{{ asset('assets/css/datatables.min.css') }}"> #}


{# {% endblock %} #}

   {% block body %}
       <div class="row">
           <div class="col-lg-12">
               <div class="card">
                   <div class="card-header border-1">
                       {#                       <h4 class="card-title mb-0">Liste des utilisateurs</h4> #}
                       <div class="row align-items-center gy-3">
                           <div class="col-sm">
                               <h5 class="card-title mb-0">Liste des utilisateurs</h5>
                           </div>
                           <div class="col-sm-auto">
                               <div class="d-flex gap-1 flex-wrap">
                                   <a  class="btn btn-success add-btn"  href="{{ path('app_admin_user_new') }}"><i class="ri-add-line align-bottom me-1"></i> Ajouter un nouvel utilisateur
                                   </a>
                               </div>
                           </div>
                       </div>
                   </div><div class="card-body">
                       {% if users|length > 0 %}
                           {#                               <table class="table align-middle table-nowrap" id="#myTable"> #}
                           <table id="myTable" class="table table-striped table-bordered">
                               <thead class="table-light">
                               <tr>
                                   <th>Utilisateur</th>
                                   <th>Email</th>
                                   <th>Téléphone</th>
                                   <th>Titre</th>
                                   <th>Structure</th>
                                   <th>Profil</th>
                                   <th>Statut</th>
                                   <th>Action</th>
                               </tr>
                               </thead>
                               <tbody>
                               {% for user in users %}
                                   <tr>
                                       <td>{{ user.fullName }}</td>
                                       <td>{{ user.email }}</td>
                                       <td>{{ user.telephone }}</td>
                                       <td>{{ user.titre }}</td>
                                       <td>
                                           <span class="badge bg-info-subtle text-info badge-borde text-uppercase">{{ user.structure }}</span>
                                       </td>
                                       {#<td class="profil">
                                           <img src="{{ user.photo ? asset('uploads/profile_photos/' ~ user.photo) : asset('images/default-profile.png') }}"
                                                alt="Photo de profil"
                                                style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;">
                                       </td>#}
                                       <td>{% if user.actif==false %}
                                               <span class="badge bg-danger-subtle text-danger badge-borde">{{ 'Inactif' }}</span>
                                           {% else %}
                                               <span class="badge bg-success-subtle text-success badge-border">{{ 'Actif' }}</span>{% endif %}
                                       </td>
                                       <td>
                                           <div class="d-flex gap-2">
                                               <div class="edit">
                                                   <a href="{{ path('app_user_edit', {'id': user.id}) }}"
                                                      title="Modifier" data-rec="{{ user.id }}"> <i
                                                               class="bx bx-edit-alt me-1"></i></a>
                                                   {#                                                       <button class="btn btn-sm btn-success edit-item-btn" #}
                                                   {#                                                               data-bs-toggle="modal" data-bs-target="#showModal">Modifier</button> #}
                                               </div>
                                               <div class="ck-reset_all">
                                                   <a href="{{ path('reset_password_by_admin',{'id':user.id}) }}"
                                                      title="Reinitialiser mot de passe" data-rec="{{ user.id }}"> <i
                                                               class="mdi mdi-lock-reset"></i></a>
                                                   {#                                                       <button type="submit" class="btn btn-success" id="add-btn" ">Reinitialiser mot de passe</button> #}
                                                   {#                                                       <button class="btn btn-sm btn-danger remove-item-btn" data-bs-toggle="modal" data-bs-target="#deleteRecordModal">Supprimer</button> #}
                                               </div>
                                               <div class="ck-reset_all">
                                                   {% if user.actif==false %}
                                                       <a title="Activer" class="text-success"
                                                          href="{{ path('actvationcompte',{'id':user.id}) }}">
                                                           <i class="mdi mdi-account-reactivate"></i>
                                                       </a>
                                                   {% else %}
                                                       <a class="text-danger" title="Désactiver"
                                                          href="{{ path('deactvationcompte',{'id':user.id}) }}">
                                                           <i class="mdi mdi-account-off "></i>
                                                       </a>
                                                   {% endif %}
                                               </div>
                                           </div>
                                       </td>
                                   </tr>
                               {% endfor %}
                               </tbody>
                           </table>
                       {% else %}
                           <div class="noresult">
                               <div class="text-center">
                                   <lord-icon src="https://cdn.lordicon.com/msoeawqm.json" trigger="loop"
                                              colors="primary:#121331,secondary:#08a88a" style="width:75px;height:75px">
                                   </lord-icon>
                                   <h5 class="mt-2">Aucun utilisateur pour l'instant</h5>
                                   {#                                       <p class="text-muted mb-0">We've searched more than 150+ Orders We did not find any #}
                                   {#                                           orders for you search.</p> #}
                               </div>
                           </div>
                       {% endif %}
                   </div>
               </div>
           </div>
       </div>

   {% endblock %}

{% block javascripts %}
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="//cdn.datatables.net/2.0.3/js/dataTables.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/v/bs5/jszip-3.10.1/dt-2.0.3/b-3.0.1/b-html5-3.0.1/b-print-3.0.1/datatables.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#myTable').DataTable({
                dom: 'Bfrtip',
                buttons: ['copy', 'excel', 'csv', 'print', 'pdf']
            });
        });
    </script>
{% endblock %}