{# templates/paiement_consignation/success.html.twig #}
{% extends 'front/status_base.html.twig' %}

{% block title %}Paiement Réussi{% endblock %}

{% block body %}
    <div class="min-vh-100 d-flex align-items-center">
        <div class="container status-container">
            <div class="status-card">
                <div class="status-header bg-success">
                    <h2><i class="fas fa-check-circle me-2"></i> Paiement Réussi</h2>
                </div>
                <div class="status-body text-center">
                    <div class="success-icon mb-4">
                        <i class="fas fa-check-circle text-success" style="font-size: 5rem;"></i>
                    </div>
                    
                    <div class="alert alert-custom alert-dismissible fade show" role="alert">
                        <h4 class="alert-heading"><i class="fas fa-check me-2"></i> Félicitations !</h4>
                        <hr>
                        <p class="mb-0">Le paiement de consignation pour le dossier <strong>{{ dossier.codeSuivi }}</strong> a été effectué avec succès.</p>
                    </div>

                    <div class="d-grid gap-2 mt-4">
                        <a href="{{ path('greffier_dossier_consignation', {id: dossier.id}) }}" class="btn btn-status">
                            <i class="fas fa-money-bill-wave"></i> Envoyer la quittance de paiement 
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <style>
        .success-icon {
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .alert-custom {
            border-left: 4px solid #28a745;
            border-radius: 8px;
            background-color: #f8f9fa;
        }
        
        .status-header.bg-success {
            background: linear-gradient(135deg, #28a745, #5cb85c) !important;
        }
        
        .btn-status {
            background-color: #28a745;
            color: white;
            transition: all 0.3s;
        }
        
        .btn-status:hover {
            background-color: #218838;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
    </style>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Animation d'entrée
            const card = document.querySelector('.status-card');
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            
            setTimeout(() => {
                card.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, 100);
            
            // Confettis pour le succès
            if (typeof Confetti !== 'undefined') {
                const confettiSettings = { 
                    target: 'status-card',
                    max: 100,
                    size: 1.5,
                    animate: true,
                    props: ['circle', 'square', 'triangle'],
                    colors: [[30,144,255], [46,204,113], [241,196,15]],
                    clock: 50
                };
                const confetti = new Confetti(confettiSettings);
                confetti.render();
            }
        });
    </script>
{% endblock %}